module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){e.exports=require("vscode")},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getVSCodeConfig=void 0;const s=o(r(0));t.getVSCodeConfig=function(e){return s.workspace.getConfiguration("prettier",e)}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.errorHandlerDisposables=t.safeExecution=t.logMessage=t.setUsedModule=void 0;const s=o(r(0)),a=r(3),u=r(1),l=s.window.createStatusBarItem(s.StatusBarAlignment.Right,-1);l.text="Prettier+",l.command="prettier-plus.open-output",f(s.window.activeTextEditor);const c=s.window.createOutputChannel("Prettier+");let d;function f(e){if(!e)return void l.hide();const t=e.document.uri.scheme;if("debug"===t||"output"===t)return;const{disableLanguages:r}=u.getVSCodeConfig(e.document.uri);s.languages.match(a.allVSCodeLanguageIds,e.document)>0&&!r.includes(e.document.languageId)?l.show():l.hide()}function g(e){l.text=e,l.tooltip=d,l.show()}function p(e,t){let r;r=t?`${t} (${(new Date).toLocaleString()}):`:(new Date).toLocaleString()+":",c.appendLine(r),c.appendLine("-".repeat(r.length)),c.appendLine(e+"\n")}t.setUsedModule=function(e,t){d=`${e}@${t}`},t.logMessage=p,t.safeExecution=function(e,t,r){if(e instanceof Promise)return e.then(e=>(g("Prettier+: $(check)"),e)).catch(e=>(p(e.message,r),g("Prettier+: $(x)"),t));try{const t=e();return g("Prettier+: $(check)"),t}catch(e){return p(e.message,r),g("Prettier+: $(x)"),t}},t.errorHandlerDisposables=[s.window.onDidChangeActiveTextEditor(e=>f(e)),s.commands.registerCommand("prettier-plus.open-output",()=>c.show())]},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.allVSCodeLanguageIds=t.getParserByLangIdAndFilename=t.VSCodePluginLanguageIds=void 0;const s=o(r(5)),a=o(r(4)).getSupportInfo().languages;t.VSCodePluginLanguageIds=["php","jade","ruby","swift","xml"];const u={mongo:["babel","flow"],javascript:["babel","flow"],javascriptreact:["babel","flow"],typescript:["typescript","babel-ts"],typescriptreact:["typescript","babel-ts"],json:["json"],jsonc:["json"],json5:["json5"],postcss:["css"],css:["css"],less:["less"],scss:["scss"],graphql:["graphql"],markdown:["markdown"],mdx:["mdx"],html:["html"],vue:["vue"],yaml:["yaml"],php:["php"],jade:["pug"],ruby:["ruby"],swift:["swift"],xml:["xml"]};t.getParserByLangIdAndFilename=function(e,t){if(!t)return c(e);const r=l[e];if(!r)return c(e);const n=s.basename(t),i=s.extname(t);let o="";for(const e of r){if(e.filenames.includes(n))return e.parsers[0];if(e.extensions.includes(i))return e.parsers[0];0===e.filenames.length&&0===e.extensions.length&&(o=e.parsers[0])}return o||c(e)},t.allVSCodeLanguageIds=[...t.VSCodePluginLanguageIds];const l={};function c(e){var t;const r=u[e];return null!==(t=null==r?void 0:r[0])&&void 0!==t?t:""}a.forEach(e=>{const{filenames:r=[],extensions:n=[],parsers:i=[],vscodeLanguageIds:o=[]}=e;o.length>0&&t.allVSCodeLanguageIds.push(...o),o.forEach(e=>{l[e]?l[e].push({filenames:r,extensions:n,parsers:i}):l[e]=[{filenames:r,extensions:n,parsers:i}]})})},function(e,t){e.exports=require("prettier")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const s=o(r(0)),a=r(2),u=r(7),l=r(3),c=r(10),d=r(11),f=r(1);let g;function p(){null==g||g.dispose(),g=void 0}t.activate=async function(e){const{fileIsIgnored:t}=u.ignoreFileHandler(e.subscriptions),r=new d.PrettierEditProvider(t),n=()=>{p();const e=function(){const{disableLanguages:e}=f.getVSCodeConfig();let t=[];if(0!==e.length)for(const r of l.allVSCodeLanguageIds)e.includes(r)||t.push(r);else t=l.allVSCodeLanguageIds;if(!s.workspace.workspaceFolders)return t;const r=[],n=[];for(const e of t)r.push({language:e,scheme:"untitled"}),n.push({language:e,scheme:"file"});return[...r,...n,{language:"jsonc",scheme:"vscode-userdata"}]}();g=s.languages.registerDocumentFormattingEditProvider(e,r)};n(),e.subscriptions.push(s.workspace.onDidChangeWorkspaceFolders(n),{dispose:p},c.prettierConfigFileWatcher,...a.errorHandlerDisposables)}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ignoreFileHandler=void 0;const a=o(r(8)),u=s(r(9)),l=o(r(5)),c=o(r(0)),d=r(2),f=r(1),g={ignores:()=>!1};async function p(e){try{return await a.promises.stat(e),!0}catch(e){if("ENOENT"===e.code)return!1;throw e}}t.ignoreFileHandler=function(e){let t={};e.push({dispose:()=>t={}});const r=e=>{t[e.fsPath]=g},n=async i=>{let o=g;if(!t[i.fsPath]){const t=c.workspace.createFileSystemWatcher(i.fsPath);e.push(t),t.onDidCreate(n,null,e),t.onDidChange(n,null,e),t.onDidDelete(r,null,e)}if(await p(i.fsPath)){const e=await a.promises.readFile(i.fsPath,"utf-8");o=u.default().add(e)}t[i.fsPath]=o},i=async e=>{const{ignorePath:r}=f.getVSCodeConfig(c.Uri.file(e)),i=function(e,t){if(!t)return;if(c.workspace.workspaceFolders){const r=c.workspace.getWorkspaceFolder(c.Uri.file(e));if(r)return function(e,t){return l.isAbsolute(e)?e:l.join(t,e)}(t,r.uri.fsPath)}}(e,r);return i?(t[i]||await n(c.Uri.file(i)),await!p(i)?(".prettierignore"!==r&&d.logMessage(`Invalid "prettier.ignorePath" in your settings. The path ${r} doesn't exist.`,e),{ignoreFilePath:"",ignorer:g}):{ignoreFilePath:i,ignorer:t[i]}):{ignoreFilePath:"",ignorer:g}};return{fileIsIgnored:async e=>{const{ignorer:t,ignoreFilePath:r}=await i(e);return t.ignores(l.relative(l.dirname(r),e))}}}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("ignore")},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.prettierConfigFileWatcher=void 0;const s=o(r(4)),a=o(r(0));t.prettierConfigFileWatcher=a.workspace.createFileSystemWatcher(`**/{${[".prettierrc",".prettierrc.json",".prettierrc.yaml",".prettierrc.yml",".prettierrc.js","package.json","prettier.config.js",".editorconfig"].join(",")}}`),t.prettierConfigFileWatcher.onDidChange(s.clearConfigCache),t.prettierConfigFileWatcher.onDidCreate(s.clearConfigCache),t.prettierConfigFileWatcher.onDidDelete(s.clearConfigCache)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PrettierEditProvider=void 0;const s=o(r(12)),a=o(r(4)),u=r(13),l=o(r(0)),c=r(2),d=r(14),f=r(3),g=r(1);t.PrettierEditProvider=class{constructor(e){this._fileIsIgnored=e}provideDocumentFormattingEdits(e){return this._provideEdits(e)}async _format(e,{fileName:t,languageId:r,uri:n,isUntitled:i}){var o;const s=g.getVSCodeConfig(n),u=[];if(s.disableLanguages.includes(r))return e;f.VSCodePluginLanguageIds.includes(r)&&(null===(o=l.workspace.workspaceFolders)||void 0===o||o.forEach(e=>{u.push(e.uri.fsPath)}),this._cachedGlobalNodeModulesPaths||(this._cachedGlobalNodeModulesPaths=await this._globalNodeModulesPaths()),this._cachedGlobalNodeModulesPaths.forEach(e=>{e&&u.push(e)}));let p,h=s.parser;""===h&&(h=f.getParserByLangIdAndFilename(r,i?void 0:t));let m=!1;if(s.requireConfig){const{config:e,error:r}=await this._resolvePrettierConfig(t,{editorconfig:!0});null!=r?c.logMessage(`Failed to resolve config for ${t}. Falling back to the default settings.`):null==e?c.logMessage("Prettier config is empty. Falling back to the default settings."):(p=e,m=!0)}const b=this._mergeConfig(m,p||{},{printWidth:s.printWidth,tabWidth:s.tabWidth,singleQuote:s.singleQuote,trailingComma:s.trailingComma,bracketSpacing:s.bracketSpacing,jsxBracketSameLine:s.jsxBracketSameLine,semi:s.semi,useTabs:s.useTabs,proseWrap:s.proseWrap,arrowParens:s.arrowParens,jsxSingleQuote:s.jsxSingleQuote,htmlWhitespaceSensitivity:s.htmlWhitespaceSensitivity,vueIndentScriptAndStyle:s.vueIndentScriptAndStyle,endOfLine:s.endOfLine,quoteProps:s.quoteProps,filepath:t,pluginSearchDirs:u,parser:h}),v=(e,n)=>{c.logMessage(`Using ${e}@${n}${m?" with Prettier config":""} to format code with ${h} parser for ${r} language.`,t),c.setUsedModule(e,n)};return s.tslintIntegration&&d.tslintLanguageIds.includes(r)?c.safeExecution(()=>(v("prettier-tslint","0.4.2"),d.prettierTslintFormat()({text:e,filePath:t,fallbackPrettierOptions:b})),e,t):s.eslintIntegration&&d.eslintLanguageIds.includes(r)?c.safeExecution(()=>(v("prettier-eslint","11.0.0"),d.prettierEslintFormat()({text:e,filePath:t,fallbackPrettierOptions:b})),e,t):s.stylelintIntegration&&d.stylelintLanguageIds.includes(r)?(v("prettier-stylelint","0.4.2"),c.safeExecution(d.prettierStylelintFormat()({text:e,filePath:t,prettierOptions:b}),e,t)):c.safeExecution(()=>(v("prettier",a.version),a.format(e,b)),e,t)}async _globalNodeModulesPaths(){const e=u.promisify(s.exec),t=async t=>{try{let r=(await e(t)).stdout.trim();return r.endsWith("node_modules")&&(r=r.replace("node_modules","")),r}catch(e){}};return Promise.all([t("yarn global dir"),t("npm -g root")])}async _resolvePrettierConfig(e,t){try{return{config:await a.resolveConfig(e,t),error:null}}catch(e){return{error:e}}}_mergeConfig(e,t,r){return e?Object.assign({parser:r.parser},t):Object.assign(Object.assign({},r),t)}_fullDocumentRange(e){const t=e.lineCount-1;return new l.Range(0,0,t,e.lineAt(t).text.length)}async _provideEdits(e){if(!e.isUntitled&&await this._fileIsIgnored(e.fileName))return[];const t=await this._format(e.getText(),e);return[l.TextEdit.replace(this._fullDocumentRange(e),t)]}}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";let n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.prettierStylelintFormat=t.prettierTslintFormat=t.prettierEslintFormat=t.stylelintLanguageIds=t.tslintLanguageIds=t.eslintLanguageIds=void 0,t.eslintLanguageIds=["javascript","javascriptreact","typescript","typescriptreact","vue"],t.tslintLanguageIds=["typescript","typescriptreact"],t.stylelintLanguageIds=["css","less","scss"],t.prettierEslintFormat=function(){return n||(n=r(15)),n},t.prettierTslintFormat=function(){return i||(i=r(16)),i.format},t.prettierStylelintFormat=function(){return o||(o=r(17)),o.format}},function(e,t){e.exports=require("prettier-eslint")},function(e,t){e.exports=require("prettier-tslint")},function(e,t){e.exports=require("prettier-stylelint")}]);
//# sourceMappingURL=main.js.map